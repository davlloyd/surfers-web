apiVersion: projectcontour.io/v1
kind: HTTPProxy
metadata:
  name: surferslookout-surfersweb
  namespace: alpha
spec:
  routes:
  - conditions:
    - header:
        exact: override
        name: K-Network-Hash
    enableWebsockets: true
    permitInsecure: true
    requestHeadersPolicy:
      set:
      - name: K-Network-Hash
        value: 4343eed5c2e806b1dde56c642a9bb6b24e6b4d89280aa77990e062636c680204
    retryPolicy:
      count: 2
      retryOn:
      - cancelled
      - connect-failure
      - refused-stream
      - resource-exhausted
      - retriable-status-codes
      - reset
    services:
    - name: surfersweb-00033
      port: 80
      requestHeadersPolicy:
        set:
        - name: Knative-Serving-Namespace
          value: alpha
        - name: Knative-Serving-Revision
          value: surfersweb-00033
      weight: 100
    timeoutPolicy:
      idle: infinity
      response: infinity
  - enableWebsockets: true
    permitInsecure: true
    requestHeadersPolicy: {}
    retryPolicy:
      count: 2
      retryOn:
      - cancelled
      - connect-failure
      - refused-stream
      - resource-exhausted
      - retriable-status-codes
      - reset
    services:
    - name: surfersweb-00033
      port: 80
      requestHeadersPolicy:
        set:
        - name: Knative-Serving-Namespace
          value: alpha
        - name: Knative-Serving-Revision
          value: surfersweb-00033
      weight: 100
    timeoutPolicy:
      idle: infinity
      response: infinity
  virtualhost:
    fqdn: surferslookout.com
